const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Alert-1.0.43-BeyiDeYu.js","./cm-1.0.43-BIThoEwM.js","./redux-1.0.43-X9ShETON.js","./vendor-1.0.43-CN03Eozo.js","./index-1.0.43-Lwi8RVeB.js","./iconBase-1.0.43-BkINToSh.js","./Typography-1.0.43-CjHjtdZs.js","./lib-1.0.43-GM4CAPbj.js","./loglevel-1.0.43-BZ7XahX3.js","./lodash-1.0.43-BGoSrRk7.js","./moment-1.0.43-C5S46NFB.js","./useEnhancedEffect-1.0.43-DcXwKdLb.js","./AlertTitle-1.0.43-CmdM_nv2.js","./createSvgIcon-1.0.43-C8_lU5Lv.js","./Close-1.0.43-DZEA4jNx.js","./QueryBuilder-1.0.43-DowaLN4B.js","./main-1.0.43.js","./index-1.0.43-Br_nYvvF.js","./notistack-1.0.43-CFZ1B9cW.js","./ConfirmDialog-1.0.43-HyVPTU5U.js","./AdminTheme-1.0.43-CqjS-p3h.js","./hooks-1.0.43-Bzf6s8gj.js","./StartQueryBuilder-1.0.43-DFJvLNPB.js","./RestApi-1.0.43-DDknciaN.js","./Spinner-1.0.43-YmZqinVQ.js","./index-1.0.43-DuBV8iHb.js","./index-1.0.43-DTrIm2Pv.js","./SanitizeComponent-1.0.43-DS8pdFaO.js","./dompurify-1.0.43-DhD2mIk-.js","./FormHelperText-1.0.43-BbvxPfFT.js","./utils-1.0.43-iop7lDec.js","./useFormControl-1.0.43-D7bmEJOO.js","./FormControlLabel-1.0.43-DhLqIzQC.js","./Checkbox-1.0.43-C_H-ygma.js","./SwitchBase-1.0.43-jxlYBoq8.js","./useControlled-1.0.43-DObA-A1B.js","./Tooltip-1.0.43-Dw3sfo8K.js","./ThemeProvider-1.0.43-BdkGbeAu.js","./Popper-1.0.43-8Yb3KIgh.js","./Menu-1.0.43-TbmZ3Ge2.js","./Divider-1.0.43-BNePHRrN.js","./MenuItem-1.0.43-Uicrp-o6.js","./TextField-1.0.43-DsZQBbKY.js","./Select-1.0.43-CISjJoqC.js","./FormLabel-1.0.43-DuYrsDLO.js","./InputAdornment-1.0.43-9P5bF1dN.js","./TabPanel-1.0.43-BFjnBi0G.js","./useThemeProps-1.0.43-C5lTKcwO.js","./getThemeProps-1.0.43-5uxEwZ_e.js","./TabList-1.0.43-wevj3JyD.js","./Tabs-1.0.43-C3a4iH_4.js","./Switch-1.0.43-DUXi6nEm.js","./main-1.0.43-LBsY5zsP.css"])))=>i.map(i=>d[i]);
import{_ as E}from"./main-1.0.43.js";import{j as r}from"./cm-1.0.43-BIThoEwM.js";import{r as t,u as x}from"./redux-1.0.43-X9ShETON.js";import{a as w}from"./AdminTheme-1.0.43-CqjS-p3h.js";import{a as T}from"./hooks-1.0.43-Bzf6s8gj.js";import{s as B,a as A}from"./StartQueryBuilder-1.0.43-DFJvLNPB.js";import{l as I}from"./ActionsExplorer-1.0.43-BvdT5anO.js";import{D as P}from"./DatabaseTypeEnum-1.0.43-DeJfpW1u.js";import{l as i}from"./lib-1.0.43-GM4CAPbj.js";import{S as Q}from"./Spinner-1.0.43-YmZqinVQ.js";import{T as g}from"./ThemeProvider-1.0.43-BdkGbeAu.js";const q=()=>{const a=T(),[o,m]=t.useState(!1),[l,S]=t.useState(!1),[p,j]=t.useState({databases:[],defaultDatabase:"",wpDatabase:""});return i.debug("databases",p),t.useEffect(()=>{I(s=>{var y;const b=s==null?void 0:s.data,n=s==null?void 0:s.context;i.debug("response",b,n);const d=[];b.map(e=>{d.push({dbs:e.dbs,dbsType:e.dbs_type,pdsDbs:e.pds})}),d.sort((e,u)=>{var D,_,h,L;return((D=e==null?void 0:e.dbs)==null?void 0:D.toLocaleLowerCase())>((_=u==null?void 0:u.dbs)==null?void 0:_.toLocaleLowerCase())?1:((h=u==null?void 0:u.dbs)==null?void 0:h.toLocaleLowerCase())>((L=e==null?void 0:e.dbs)==null?void 0:L.toLocaleLowerCase())?-1:0}),i.debug(d);const f=d.filter(e=>e.dbsType===P.WP),c=f.length===1?f[0].dbs:"";j({databases:d,defaultDatabase:c,wpDatabase:c}),a(B({databases:{databases:d,defaultDatabase:c,wpDatabase:c}})),m(!0),a(A({queryId:((y=n==null?void 0:n.env)==null?void 0:y.id)??0}))},s=>{i.error("error",s),S(!0)})},[]),{isLoaded:o,hasErrors:l,databases:p}},v=x,C=()=>{const a=v(o=>o.sql);return i.debug("queryBuilder",a),a},M=t.lazy(()=>E(()=>import("./Alert-1.0.43-BeyiDeYu.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]),import.meta.url)),O=t.lazy(()=>E(()=>import("./QueryBuilder-1.0.43-DowaLN4B.js").then(a=>a.Q),__vite__mapDeps([15,16,1,2,3,7,8,9,10,17,5,6,11,18,19,20,21,22,23,24,25,26,4,27,28,29,30,31,32,33,34,35,13,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52]),import.meta.url)),z=()=>{const a=C(),{isLoaded:o,hasErrors:m}=q(),l=w();return o?m||o&&a.databases.databases.length===0?r.jsx(t.Suspense,{children:r.jsx(M,{severity:"error",message:"Error loading databases",close:!0})}):r.jsx(g,{theme:l,children:r.jsx(t.Suspense,{children:r.jsx(O,{queryBuilderState:a})})}):r.jsx(g,{theme:l,children:r.jsx(Q,{title:"Loading databases..."})})},U=Object.freeze(Object.defineProperty({__proto__:null,default:z},Symbol.toStringTag,{value:"Module"}));export{U as M,C as u};
