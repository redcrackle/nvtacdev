import{C as h,aU as y,l as c,a0 as C,S,a1 as _,aV as M,aW as U,aX as A,a as T,aY as j}from"./lib-1.0.43-GM4CAPbj.js";import{R as O}from"./RestApi-1.0.43-DDknciaN.js";import{T as b}from"./TargetEnum-1.0.43-CIW1jlU5.js";const v=(t,r,i,n,e,s,a,o=!1)=>{c.debug(t,r,i,n,e),O(h.appUrlSettings,{action:"admin_settings",dbs:i,tbl:n,settings:JSON.stringify({scope:t,target:r,data:e})},s,a,o)},D=(t,r,i,n,e,s,a,o,g,p=!1)=>{const u={app_id:t,cnt_id:r,target:i,settings:JSON.stringify(n),theme:JSON.stringify(a)};e!==void 0&&(u.chart=JSON.stringify(e)),s!==void 0&&(u.map=JSON.stringify(s)),O(h.appUrlAppSettings,u,o,g,p)},x=(t,r,i,n,e=!1)=>{var g,p,u,I,J,N;const s=y(t);c.debug(s);const{state:a,...o}=U.getSelectors().selectTableById(S.getState().tables,t);if(c.debug(a,o),s.app_id){let d={...C.getSelectors().selectChart(S.getState().charts,t)};if(Object.keys(d).length===0){const f=A.getSelectors().selectMetaDataById(S.getState().metaData,t);try{const m=JSON.parse((u=(p=(g=f==null?void 0:f.app)==null?void 0:g.container)==null?void 0:p[0])==null?void 0:u.cnt_chart);Object.keys(m).length===0?d=void 0:d={...m}}catch{d=void 0}}else delete d.data;c.debug(d);let l={...M.getSelectors().selectMap(S.getState().maps,t)};if(Object.keys(l).length===0){const f=A.getSelectors().selectMetaDataById(S.getState().metaData,t);try{const m=JSON.parse((N=(J=(I=f==null?void 0:f.app)==null?void 0:I.container)==null?void 0:J[0])==null?void 0:N.cnt_map);Object.keys(m).length===0?l=void 0:l={...m}}catch{l=void 0}}else l==null||delete l.state;c.debug(l);const{...B}=_.getSelectors().selectThemeById(S.getState().themes,t);c.debug(B),D(s.app_id,s.cnt_id,b.TABLE,o,d,l,B,i,n,e)}else s.dbs.trim()!==""&&s.tbl.trim()!==""?v(r,b.TABLE,s.dbs,s.tbl,o,i,n,e):(c.error("error","Missing data source"),n(T.contactSupport))},H=(t,r,i,n,e,s=!1)=>{const a=y(t);c.debug(a);const{state:o,...g}=j.getSelectors().selectForm(S.getState().forms,t);if(c.debug(o,g),a.app_id){const{...p}=_.getSelectors().selectThemeById(S.getState().themes,t);c.debug(p),D(a.app_id,a.cnt_id,i,g,void 0,void 0,p,n,e,s)}else a.dbs.trim()!==""&&a.tbl.trim()!==""?v(r,i,a.dbs,a.tbl,g,n,e,s):(c.error("error","Missing data source"),e(T.contactSupport))},P=(t,r,i,n=!1)=>{const e=y(t);c.debug(e,t);const s=e.app_id,a=e.cnt_id,o=C.getSelectors().selectChart(S.getState().charts,t);c.debug(o);const{...g}=_.getSelectors().selectThemeById(S.getState().themes,t);c.debug(g),O(h.appUrlAppSettings,{app_id:s,cnt_id:a,target:b.CHART,settings:JSON.stringify(o),theme:JSON.stringify(g)},r,i,n)},V=(t,r,i,n=!1)=>{const e=y(t);c.debug(e,t);const s=e.app_id,a=e.cnt_id,{state:o,...g}=M.getSelectors().selectMap(S.getState().maps,t);c.debug(g);const{...p}=_.getSelectors().selectThemeById(S.getState().themes,t);c.debug(p),O(h.appUrlAppSettings,{app_id:s,cnt_id:a,target:b.MAP,settings:JSON.stringify(g),theme:JSON.stringify(p)},r,i,n)};export{P as a,V as b,v as c,x as d,H as e,D as s};
