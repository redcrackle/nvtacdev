import{j as d}from"./cm-1.0.43-BIThoEwM.js";import{l as S,o as F}from"./lib-1.0.43-GM4CAPbj.js";import{B as V}from"./Spinner-1.0.43-YmZqinVQ.js";import{F as A}from"./FormLabel-1.0.43-DuYrsDLO.js";import{L as k,a as E}from"./Menu-1.0.43-TbmZ3Ge2.js";import{g as G,l as I,L as P}from"./ListItem-1.0.43-Bg1FR-64.js";import{r as O}from"./redux-1.0.43-X9ShETON.js";import{i as T,j as U,c as R,l as D,r as M,m as W,o as $}from"./Typography-1.0.43-CjHjtdZs.js";import{u as q}from"./useEnhancedEffect-1.0.43-DcXwKdLb.js";import{a as z,B as K}from"./iconBase-1.0.43-BkINToSh.js";import{L as H}from"./ListItemIcon-1.0.43-BCRBmmI9.js";import{C as J}from"./Checkbox-1.0.43-C_H-ygma.js";import{L as Q}from"./ListItemText-1.0.43-68MGGGuF.js";import"./vendor-1.0.43-CN03Eozo.js";import"./loglevel-1.0.43-BZ7XahX3.js";import"./lodash-1.0.43-BGoSrRk7.js";import"./moment-1.0.43-C5S46NFB.js";import"./useFormControl-1.0.43-D7bmEJOO.js";import"./ThemeProvider-1.0.43-BdkGbeAu.js";import"./index-1.0.43-Br_nYvvF.js";import"./notistack-1.0.43-CFZ1B9cW.js";import"./FormHelperText-1.0.43-BbvxPfFT.js";import"./utils-1.0.43-iop7lDec.js";import"./MenuItem-1.0.43-Uicrp-o6.js";import"./SwitchBase-1.0.43-jxlYBoq8.js";import"./useControlled-1.0.43-DObA-A1B.js";import"./createSvgIcon-1.0.43-C8_lU5Lv.js";const X=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.alignItems==="flex-start"&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters]},Y=t=>{const{alignItems:e,classes:n,dense:f,disabled:o,disableGutters:p,divider:m,selected:g}=t,u=D({root:["root",f&&"dense",!p&&"gutters",m&&"divider",o&&"disabled",e==="flex-start"&&"alignItemsFlexStart",g&&"selected"]},G,n);return{...n,...u}},Z=U(K,{shouldForwardProp:t=>M(t)||t==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:X})(W(({theme:t})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${I.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:$(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${I.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:$(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${I.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:$(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:$(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${I.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${I.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},variants:[{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.dense,style:{paddingTop:4,paddingBottom:4}}]}))),_=O.forwardRef(function(e,n){const f=T({props:e,name:"MuiListItemButton"}),{alignItems:o="center",autoFocus:p=!1,component:m="div",children:g,dense:b=!1,disableGutters:u=!1,divider:j=!1,focusVisibleClassName:y,selected:w=!1,className:h,...x}=f,L=O.useContext(k),B=O.useMemo(()=>({dense:b||L.dense||!1,alignItems:o,disableGutters:u}),[o,L.dense,b,u]),r=O.useRef(null);q(()=>{p&&r.current&&r.current.focus()},[p]);const a={...f,alignItems:o,dense:B.dense,disableGutters:u,divider:j,selected:w},s=Y(a),i=z(r,n);return d.jsx(k.Provider,{value:B,children:d.jsx(Z,{ref:i,href:x.href||x.to,component:(x.href||x.to)&&m==="div"?"button":m,focusVisibleClassName:R(s.focusVisible,y),ownerState:a,className:R(s.root,h),...x,classes:s,children:g})})}),$t=({column:t,columnName:e,columnLabel:n,lov:f,lookups:o,columnFilters:p,setColumnFilters:m,setCurrentFilterColumnName:g,css:b,clientSideProcessing:u,tableColumns:j})=>{S.debug(e,f,p);let y=[];p.map(r=>{r.id===e&&Array.isArray(r.value)&&(y=r.value)});const w={...b(),margin:"10px 0 0 0",padding:0,height:"180px",overflow:"auto"},h=r=>d.jsxs(E,{sx:w,children:[...r.map(a=>{const s=u?a.key:a.value,i=a.value;return d.jsx(P,{"data-testid":s,sx:{margin:0,padding:0},children:d.jsxs(_,{selected:y.includes(s),sx:{padding:"0 8px 0 0"},onClick:()=>{const C=[...p].filter(v=>v.id===e),l=C.length===0?[]:C[0].value;if(!l.includes(s))l.push(s);else{const v=l.indexOf(s);v!==-1&&l.splice(v,1)}const c=[...p].filter(v=>v.id!==e);l.length>0&&c.push({id:e,value:l}),l.length===0&&g(""),m(c)},onFocus:()=>{g(e)},onBlur:()=>{g("")},children:[d.jsx(H,{sx:{minWidth:0},children:d.jsx(J,{checked:y.includes(s)})}),d.jsx(Q,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:F(i)})]})})})]}),x=r=>r.sort((a,s)=>a.value.localeCompare(s.value)),L=()=>{const r=[],a=j.filter(s=>s.columnName===e)[0];return t.getFacetedUniqueValues().forEach((s,i)=>{var C,l;if(i)if(o&&o[e]&&((C=a==null?void 0:a.lookup)==null?void 0:C.loadOnStartup)!==!0){if(o[e][i]&&typeof o[e][i]=="string"){const c=o[e][i]+" ("+s+")";c!==""&&r.push({key:i,value:c})}else if(o[e][i]&&Array.isArray(o[e][i])){const c=o[e][i].join((l=a==null?void 0:a.lookup)==null?void 0:l.delimiter)+" ("+s+")";c!==""&&r.push({key:i,value:c})}}else{const c=i+" ("+s+")";r.push({key:i,value:c})}}),h(x(r))},B=()=>h(x(f?[...f]:[]));return d.jsxs(V,{className:"pp-column-search-field",sx:{margin:0,padding:0},children:[d.jsx(A,{children:n}),u?L():B()]})};export{$t as default};
