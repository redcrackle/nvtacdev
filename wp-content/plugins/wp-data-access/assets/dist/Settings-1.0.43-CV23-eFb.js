const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./SettingsColumns-1.0.43-C7MffTQI.js","./cm-1.0.43-BIThoEwM.js","./redux-1.0.43-X9ShETON.js","./vendor-1.0.43-CN03Eozo.js","./useMetadataColumns-1.0.43-VUP1ysVj.js","./index-1.0.43-Br_nYvvF.js","./iconBase-1.0.43-BkINToSh.js","./Typography-1.0.43-CjHjtdZs.js","./lib-1.0.43-GM4CAPbj.js","./loglevel-1.0.43-BZ7XahX3.js","./lodash-1.0.43-BGoSrRk7.js","./moment-1.0.43-C5S46NFB.js","./useEnhancedEffect-1.0.43-DcXwKdLb.js","./notistack-1.0.43-CFZ1B9cW.js","./DynamicModeEnum-1.0.43-BXuL5kgA.js","./useStoreTable-1.0.43-L56KWd1n.js","./hooks-1.0.43-Bzf6s8gj.js","./SharedContainer-1.0.43-tDTKa5Wc.js","./main-1.0.43.js","./Spinner-1.0.43-YmZqinVQ.js","./AdminTheme-1.0.43-CqjS-p3h.js","./ActionsDml-1.0.43-CZ8W9C-X.js","./RestApi-1.0.43-DDknciaN.js","./useMetadata-1.0.43-5v27HTeK.js","./useChartSettings-1.0.43-CyXaF5Yk.js","./useRemoveAppFromStore-1.0.43-BZ2w6e3F.js","./lang-1.0.43-B1WmIuB6.js","./useStoreFormSettings-1.0.43-FA6xRyVh.js","./useFormDetails-1.0.43-D5LxUh_w.js","./AppTheme-1.0.43-C6ZTpO5w.js","./index-1.0.43-C6_8mZyP.js","./getThemeProps-1.0.43-5uxEwZ_e.js","./useAppFunctions-1.0.43-CiC-p3-f.js","./useScreenSize-1.0.43-BkaemLwA.js","./ConfirmDialog-1.0.43-HyVPTU5U.js","./dompurify-1.0.43-DhD2mIk-.js","./dayjs.min-1.0.43-B1axidXt.js","./ThemeProvider-1.0.43-BdkGbeAu.js","./FallbackSpinner-1.0.43-SRqLbyxS.js","./AlertDialog-1.0.43-Der7jh53.js","./SanitizeComponent-1.0.43-DS8pdFaO.js","./Tooltip-1.0.43-Dw3sfo8K.js","./useControlled-1.0.43-DObA-A1B.js","./Popper-1.0.43-8Yb3KIgh.js","./SharedContainer-1.0.43-DR7D6eET.css","./index-1.0.43-CEsXajp3.js","./index-1.0.43-CvTha0tS.js","./Select-1.0.43-CISjJoqC.js","./Menu-1.0.43-TbmZ3Ge2.js","./utils-1.0.43-iop7lDec.js","./useFormControl-1.0.43-D7bmEJOO.js","./createSvgIcon-1.0.43-C8_lU5Lv.js","./MenuItem-1.0.43-Uicrp-o6.js","./DefaultWhere-1.0.43-Drctlfv9.js","./FormHelperText-1.0.43-BbvxPfFT.js","./Link-1.0.43-CsQWhuI0.js","./useTableUpdater-1.0.43-C8DXp04q.js","./Stepper-1.0.43-D51mbVNg.js","./StepContent-1.0.43-DA0As2PG.js","./Collapse-1.0.43-CtSvLI94.js","./FormControlLabel-1.0.43-DhLqIzQC.js","./Checkbox-1.0.43-C_H-ygma.js","./SwitchBase-1.0.43-jxlYBoq8.js","./TextField-1.0.43-DsZQBbKY.js","./FormLabel-1.0.43-DuYrsDLO.js","./AccordionSummary-1.0.43-CNpHbZtu.js","./AccordionDetails-1.0.43-C8u8mZhB.js","./Switch-1.0.43-DUXi6nEm.js","./Tooltip-1.0.43-dEMLW8-v.js","./Tooltip-1.0.43--D4jr2go.css","./useFormUpdater-1.0.43-Bm7_S2c3.js","./PremiumFeature-1.0.43-BD8gtQwD.js","./Slider-1.0.43-DwDICOHK.js","./visuallyHidden-1.0.43-Dan1xhjv.js","./RadioGroup-1.0.43-USnV9oxc.js","./Radio-1.0.43-GAuAP3gY.js","./EnumTypeEnum-1.0.43-Ws4BsaYD.js","./react-number-format.es-1.0.43-Dn0EVwh2.js","./ResizableDrawer-1.0.43-D8-qENhC.js","./SettingsForm-1.0.43-DBCNZjwT.js","./CssUnitTextField-1.0.43-9DAGquvf.js","./SettingsFormRelationships-1.0.43-DnoJFs1c.js","./ComponentColumn-1.0.43-D990A9j6.js","./ActionsExplorer-1.0.43-BvdT5anO.js","./Autocomplete-1.0.43-C-3GGJwT.js","./Close-1.0.43-DZEA4jNx.js","./Chip-1.0.43-Ci13k7gB.js","./ActionsApp-1.0.43-BtCNZ6dp.js","./useApp-1.0.43-trge1ckI.js","./ToggleButtonGroup-1.0.43-y6Kkgg0C.js","./ThemeSettings-1.0.43-BlzBVnbW.js","./index-1.0.43-D62bof4B.js","./Stack-1.0.43-Bz9AkBaK.js","./useThemeProps-1.0.43-C5lTKcwO.js","./SettingsFormCode-1.0.43-CrlUIpnV.js","./index-1.0.43-DuBV8iHb.js","./index-1.0.43-DTrIm2Pv.js","./SettingsTableGlobalCode-1.0.43-CpFPaRM-.js","./index-1.0.43-Lwi8RVeB.js","./TreeItem2Provider-1.0.43-C2Ft9Foa.js","./index-1.0.43-Crrt7rhH.js","./ctc-1.0.43-C-ZXureb.js","./useGlobalCode-1.0.43-CT9g-lUD.js"])))=>i.map(i=>d[i]);
import{_ as f}from"./main-1.0.43.js";import{j as e}from"./cm-1.0.43-BIThoEwM.js";import{r}from"./redux-1.0.43-X9ShETON.js";import{l as i,aW as Q,S as u,aY as L,a1 as Z,b as $,bH as I,s as ee,bK as te,bL as se,bM as oe,a as T,bN as re,c as U}from"./lib-1.0.43-GM4CAPbj.js";import{u as S,a as ie}from"./hooks-1.0.43-Bzf6s8gj.js";import{A as y}from"./AdminTheme-1.0.43-CqjS-p3h.js";import{e as ne,d as ae}from"./ActionsSettings-1.0.43-DMMuBz79.js";import{S as O}from"./ScopeEnum-1.0.43-B4DDvIDj.js";import{e as d}from"./notistack-1.0.43-CFZ1B9cW.js";import{T as _}from"./Tooltip-1.0.43-dEMLW8-v.js";import{m as le,k as me,g as ce,f as ue}from"./index-1.0.43-Lwi8RVeB.js";import{A as de,T as pe,M as fe}from"./index-1.0.43-Br_nYvvF.js";import{B as ge,a as xe,b as Se}from"./settings-1.0.43-kDKJ-WYT.js";import{B as C,C as he}from"./ConfirmDialog-1.0.43-HyVPTU5U.js";import{u as be}from"./SharedContainer-1.0.43-tDTKa5Wc.js";import{T as M}from"./TargetEnum-1.0.43-CIW1jlU5.js";import{B as je,S as p}from"./Spinner-1.0.43-YmZqinVQ.js";import{u as Te}from"./useMetadata-1.0.43-5v27HTeK.js";import{D as _e}from"./DynamicModeEnum-1.0.43-BXuL5kgA.js";import{T as Ce}from"./Typography-1.0.43-CjHjtdZs.js";import{I as k}from"./iconBase-1.0.43-BkINToSh.js";import{C as z,a as P}from"./CardContent-1.0.43-B1eq8QmP.js";import{T as ke,a as x}from"./TabPanel-1.0.43-BFjnBi0G.js";import"./vendor-1.0.43-CN03Eozo.js";import"./loglevel-1.0.43-BZ7XahX3.js";import"./lodash-1.0.43-BGoSrRk7.js";import"./moment-1.0.43-C5S46NFB.js";import"./RestApi-1.0.43-DDknciaN.js";import"./useEnhancedEffect-1.0.43-DcXwKdLb.js";import"./Menu-1.0.43-TbmZ3Ge2.js";import"./ThemeProvider-1.0.43-BdkGbeAu.js";import"./MenuItem-1.0.43-Uicrp-o6.js";import"./useStoreTable-1.0.43-L56KWd1n.js";import"./ActionsDml-1.0.43-CZ8W9C-X.js";import"./useChartSettings-1.0.43-CyXaF5Yk.js";import"./useRemoveAppFromStore-1.0.43-BZ2w6e3F.js";import"./lang-1.0.43-B1WmIuB6.js";import"./useStoreFormSettings-1.0.43-FA6xRyVh.js";import"./useFormDetails-1.0.43-D5LxUh_w.js";import"./AppTheme-1.0.43-C6ZTpO5w.js";import"./index-1.0.43-C6_8mZyP.js";import"./getThemeProps-1.0.43-5uxEwZ_e.js";import"./useAppFunctions-1.0.43-CiC-p3-f.js";import"./useScreenSize-1.0.43-BkaemLwA.js";import"./dompurify-1.0.43-DhD2mIk-.js";import"./dayjs.min-1.0.43-B1axidXt.js";import"./FallbackSpinner-1.0.43-SRqLbyxS.js";import"./AlertDialog-1.0.43-Der7jh53.js";import"./SanitizeComponent-1.0.43-DS8pdFaO.js";import"./Tooltip-1.0.43-Dw3sfo8K.js";import"./useControlled-1.0.43-DObA-A1B.js";import"./Popper-1.0.43-8Yb3KIgh.js";import"./useThemeProps-1.0.43-C5lTKcwO.js";const Fe=t=>{const o=S(n=>n.ui.formSettings.isOpen&&n.ui.formSettings.appId===t);return i.debug(t,o),o},ve=()=>{const t=S(o=>o.ui.formSettings.hideThemeSettings);return i.debug("hideThemeSetting",t),t},Be=t=>{const o=S(n=>{var m,l;return(l=(m=n.forms[t])==null?void 0:m.state)==null?void 0:l.isUpdated});return i.debug("isUpdated",o),o},Ee=t=>{const o=S(n=>{var m,l;return((l=(m=n.tables[t])==null?void 0:m.state)==null?void 0:l.isUpdated)??!1});return i.debug("isTableUpdated",o),o},Ae=r.lazy(()=>f(()=>import("./SettingsColumns-1.0.43-C7MffTQI.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77]),import.meta.url)),De=r.lazy(()=>f(()=>import("./ResizableDrawer-1.0.43-D8-qENhC.js"),__vite__mapDeps([78,1,2,3,33,8,9,10,11,16,7,37,12,6,5,13,48]),import.meta.url)),Re=r.lazy(()=>f(()=>import("./SettingsForm-1.0.43-DBCNZjwT.js"),__vite__mapDeps([79,1,2,3,8,9,10,11,16,70,71,46,6,7,12,20,64,50,5,13,65,42,59,66,54,49,74,75,62,51,60,67,80,63,47,48,37,19,34,55,23,81,82,83,22,84,85,43,86,87,61,41,88,18,53,52,89,57,58,28,25,26,14,27]),import.meta.url)),Le=r.lazy(()=>f(()=>import("./ThemeSettings-1.0.43-BlzBVnbW.js"),__vite__mapDeps([90,1,2,3,16,8,9,10,11,29,30,7,31,12,71,46,6,20,64,50,5,13,91,19,54,49,67,62,42,92,93,72,37,73,48,60,55,74,75,51,80,63,47,34,14,65,59,66]),import.meta.url)),Ue=r.lazy(()=>f(()=>import("./SettingsFormCode-1.0.43-CrlUIpnV.js"),__vite__mapDeps([94,1,2,3,95,96,34,6,7,8,9,10,11,12,20,5,13,97,16,98,19,41,37,42,43,99,93,31,51,61,62,50,59,71,46,64,17,18,15,21,22,23,24,25,26,27,28,14,29,30,32,33,35,36,38,39,40,44,100,101,102,65,48]),import.meta.url)),Ot=({appId:t})=>{var D,R;i.debug(t);const o=ie(),n=ve(),m=Te(t),[l]=r.useState(Q.getSelectors().selectTableById(u.getState().tables,t));i.debug(l);const[h,N]=r.useState(L.getSelectors().selectForm(u.getState().forms,t));i.debug(h);const V=be(t),[w,ye]=r.useState(Z.getSelectors().selectThemeById(u.getState().themes,t));i.debug(w);const G=Ee(t),F=Be(t),g=a=>{o(te({appId:t,isUpdated:a}))},[H,v]=r.useState(!1),K=((D=y)==null?void 0:D.palette.mode)===$.LIGHT?(R=y)==null?void 0:R.palette.primary.main:"",B=a=>{o(ee({anchor:a}))},E=()=>{h!==void 0&&o(oe({appId:t,formState:h}))},c=()=>{o(se()),g(!1)},b=()=>{F?v(!0):(E(),c())},j=()=>{{const a=u.getState().ui.formSettings;i.debug(a),ne(t,O.GLOBAL,a.isRelationTable===!0?M.RFORM:M.FORM,s=>{if(i.debug(s),s!=null&&s.code&&(s==null?void 0:s.message)!==void 0)switch(s.code){case"ok":N(L.getSelectors().selectForm(u.getState().forms,t)),d(s.message,{variant:"success"}),V.columns.map((X,J)=>{X.lookup!==void 0&&o(re({appId:t,index:J}))});break;case"info":d(s.message,{variant:"info"});break;default:i.error(s),d(s.message??T.contactSupport,{variant:"error"})}else i.error(s),d(T.contactSupport,{variant:"error"})},s=>{i.error("error",s),d(s??T.contactSupport,{variant:"error"})}),G&&ae(t,O.GLOBAL,s=>{i.debug(s)},s=>{i.error("error",s)}),g(!1)}},q=()=>{F?(j(),setTimeout(()=>{c()},1e3)):c()},[A,W]=r.useState(0),Y=r.useMemo(()=>{const a=[{title:"Form",icon:e.jsx(le,{})},{title:"Columns",icon:e.jsx(me,{})},{title:"Hooks",icon:e.jsx(ce,{})},{title:"Theme",icon:e.jsx(ue,{})}];return I(m)?a.splice(0,2):n?a.splice(0,3):a},[n]);return Fe(t)!==!0?null:e.jsxs(e.Fragment,{children:[e.jsx(r.Suspense,{fallback:e.jsx(p,{}),children:e.jsxs(De,{closeDrawer:b,children:[e.jsxs(de,{position:"static",elevation:4,sx:{borderRadius:0},children:[e.jsxs(pe,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsx(Ce,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{flexGrow:1,paddingLeft:"6px"},children:"Form Builder"}),e.jsx(_,{title:"Dock to left",position:"bottom",children:e.jsx(k,{onClick:()=>{B(U.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(ge,{})})}),e.jsx(_,{title:"Dock to right",position:"bottom",children:e.jsx(k,{onClick:()=>{B(U.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(xe,{})})}),e.jsx(_,{title:"Close",position:"bottom",children:e.jsx(k,{onClick:b,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(fe,{})})})]}),e.jsx(Se,{menuItems:Y,menuIndex:A,setMenu:W})]}),e.jsx(z,{className:"pp-settings-container",children:e.jsx(P,{sx:{padding:0,margin:0},children:e.jsx(ke,{value:A,children:e.jsxs(je,{sx:{margin:0,padding:0,overflowX:"hidden",overflowY:"auto",height:"calc(100vh - 232px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(x,{value:0,children:e.jsx(r.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(Re,{appId:t})})}),e.jsx(x,{value:1,className:"pp-column-settings-container",children:e.jsx(r.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(Ae,{appId:t})})}),e.jsx(x,{value:2,children:e.jsx(r.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(Ue,{appId:t,tableSettings:l,setUpdateStatus:g,buttonEditorOk:j})})}),n!==!0&&e.jsx(x,{value:3,children:e.jsx(r.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(Le,{appId:t,source:_e.FORM,setIsUpdated:g})})})]})})})}),e.jsx(z,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:K},children:e.jsxs(P,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[e.jsx(C,{variant:"outlined",className:"footer_action_button_apply",onClick:j,children:"Apply"}),e.jsx(C,{variant:"outlined",className:"footer_action_button",onClick:q,children:"OK"}),e.jsx(C,{variant:"outlined",className:"footer_action_button",onClick:b,children:"Cancel"})]})})]})}),e.jsx(he,{title:"Close Form Builder?",message:"All uncommitted changes will be lost!",open:H,setOpen:v,onConfirm:()=>{E(),c()},onKeep:()=>{c()}})]})};export{Ot as default};
