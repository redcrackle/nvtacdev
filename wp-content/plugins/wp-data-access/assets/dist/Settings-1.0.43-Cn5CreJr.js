const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ResizableDrawer-1.0.43-D8-qENhC.js","./cm-1.0.43-BIThoEwM.js","./redux-1.0.43-X9ShETON.js","./vendor-1.0.43-CN03Eozo.js","./useScreenSize-1.0.43-BkaemLwA.js","./lib-1.0.43-GM4CAPbj.js","./loglevel-1.0.43-BZ7XahX3.js","./lodash-1.0.43-BGoSrRk7.js","./moment-1.0.43-C5S46NFB.js","./hooks-1.0.43-Bzf6s8gj.js","./Typography-1.0.43-CjHjtdZs.js","./ThemeProvider-1.0.43-BdkGbeAu.js","./useEnhancedEffect-1.0.43-DcXwKdLb.js","./iconBase-1.0.43-BkINToSh.js","./index-1.0.43-Br_nYvvF.js","./notistack-1.0.43-CFZ1B9cW.js","./Menu-1.0.43-TbmZ3Ge2.js","./ThemeSettings-1.0.43-BlzBVnbW.js","./AppTheme-1.0.43-C6ZTpO5w.js","./index-1.0.43-C6_8mZyP.js","./getThemeProps-1.0.43-5uxEwZ_e.js","./PremiumFeature-1.0.43-BD8gtQwD.js","./index-1.0.43-CvTha0tS.js","./AdminTheme-1.0.43-CqjS-p3h.js","./FormLabel-1.0.43-DuYrsDLO.js","./useFormControl-1.0.43-D7bmEJOO.js","./index-1.0.43-D62bof4B.js","./Spinner-1.0.43-YmZqinVQ.js","./FormHelperText-1.0.43-BbvxPfFT.js","./utils-1.0.43-iop7lDec.js","./Switch-1.0.43-DUXi6nEm.js","./SwitchBase-1.0.43-jxlYBoq8.js","./useControlled-1.0.43-DObA-A1B.js","./Stack-1.0.43-Bz9AkBaK.js","./useThemeProps-1.0.43-C5lTKcwO.js","./Slider-1.0.43-DwDICOHK.js","./visuallyHidden-1.0.43-Dan1xhjv.js","./FormControlLabel-1.0.43-DhLqIzQC.js","./Link-1.0.43-CsQWhuI0.js","./RadioGroup-1.0.43-USnV9oxc.js","./Radio-1.0.43-GAuAP3gY.js","./createSvgIcon-1.0.43-C8_lU5Lv.js","./CssUnitTextField-1.0.43-9DAGquvf.js","./TextField-1.0.43-DsZQBbKY.js","./Select-1.0.43-CISjJoqC.js","./ConfirmDialog-1.0.43-HyVPTU5U.js","./DynamicModeEnum-1.0.43-BXuL5kgA.js","./AccordionSummary-1.0.43-CNpHbZtu.js","./Collapse-1.0.43-CtSvLI94.js","./AccordionDetails-1.0.43-C8u8mZhB.js","./SettingsMap-1.0.43-DecwgidN.js","./SettingsMapMarkers-1.0.43-Car8AF3W.js","./useMapUpdater-1.0.43-CWbe2ro7.js","./main-1.0.43.js","./react-number-format.es-1.0.43-Dn0EVwh2.js","./DefaultWhere-1.0.43-Drctlfv9.js","./useMetadata-1.0.43-5v27HTeK.js","./SanitizeComponent-1.0.43-DS8pdFaO.js","./dompurify-1.0.43-DhD2mIk-.js","./Tooltip-1.0.43-Dw3sfo8K.js","./Popper-1.0.43-8Yb3KIgh.js"])))=>i.map(i=>d[i]);
import{_ as S}from"./main-1.0.43.js";import{j as e}from"./cm-1.0.43-BIThoEwM.js";import{r}from"./redux-1.0.43-X9ShETON.js";import{u as U,a as F}from"./hooks-1.0.43-Bzf6s8gj.js";import{l as n,aV as d,S as c,a1 as G,b as H,s as K,bC as q,ad as I,G as A,a as B,c as D}from"./lib-1.0.43-GM4CAPbj.js";import{B as W,a as X,b as Y}from"./settings-1.0.43-kDKJ-WYT.js";import{d as J,A as Q,T as Z,M as $}from"./index-1.0.43-Br_nYvvF.js";import{B as x,C as ee}from"./ConfirmDialog-1.0.43-HyVPTU5U.js";import{T as f}from"./Tooltip-1.0.43-dEMLW8-v.js";import{A as y}from"./AdminTheme-1.0.43-CqjS-p3h.js";import{e as m}from"./notistack-1.0.43-CFZ1B9cW.js";import{b as te}from"./ActionsSettings-1.0.43-DMMuBz79.js";import{u as se}from"./useMapUpdater-1.0.43-CWbe2ro7.js";import{B as oe,S as g}from"./Spinner-1.0.43-YmZqinVQ.js";import{f as re}from"./index-1.0.43-Lwi8RVeB.js";import{D as ie}from"./DynamicModeEnum-1.0.43-BXuL5kgA.js";import{T as ne}from"./Typography-1.0.43-CjHjtdZs.js";import{I as h}from"./iconBase-1.0.43-BkINToSh.js";import{C as E,a as R}from"./CardContent-1.0.43-B1eq8QmP.js";import{T as ae,a as z}from"./TabPanel-1.0.43-BFjnBi0G.js";import"./vendor-1.0.43-CN03Eozo.js";import"./loglevel-1.0.43-BZ7XahX3.js";import"./lodash-1.0.43-BGoSrRk7.js";import"./moment-1.0.43-C5S46NFB.js";import"./Menu-1.0.43-TbmZ3Ge2.js";import"./ThemeProvider-1.0.43-BdkGbeAu.js";import"./useEnhancedEffect-1.0.43-DcXwKdLb.js";import"./MenuItem-1.0.43-Uicrp-o6.js";import"./RestApi-1.0.43-DDknciaN.js";import"./TargetEnum-1.0.43-CIW1jlU5.js";import"./useThemeProps-1.0.43-C5lTKcwO.js";import"./getThemeProps-1.0.43-5uxEwZ_e.js";const le=t=>{const o=U(i=>{var a,p;return(p=(a=i.maps[t])==null?void 0:a.state)==null?void 0:p.isUpdated});return n.debug("isUpdated",o),o},ce=t=>{const o=U(i=>i.ui.mapSettings.isOpen&&i.ui.mapSettings.appId===t);return n.debug(t,o),o},me=r.lazy(()=>S(()=>import("./ResizableDrawer-1.0.43-D8-qENhC.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),import.meta.url)),pe=r.lazy(()=>S(()=>import("./ThemeSettings-1.0.43-BlzBVnbW.js"),__vite__mapDeps([17,1,2,3,9,5,6,7,8,18,19,10,20,12,21,22,13,23,24,25,14,15,26,27,28,29,30,31,32,33,34,35,11,36,16,37,38,39,40,41,42,43,44,45,46,47,48,49]),import.meta.url)),ue=r.lazy(()=>S(()=>import("./SettingsMap-1.0.43-DecwgidN.js"),__vite__mapDeps([50,1,2,3,51,9,5,6,7,8,52,42,14,13,10,12,15,43,44,16,11,29,32,25,41,24,28,27,45,23,47,48,49,39,40,31,35,36,37,30,53,54,21,22,55,38,56,57,58,59,60]),import.meta.url)),We=({appId:t})=>{var k,v;const o=F(),[i,a]=r.useState(d.getSelectors().selectMap(c.getState().maps,t)),[p,de]=r.useState(G.getSelectors().selectThemeById(c.getState().themes,t)),[L,j]=r.useState(!1),P=le(t),b=se(t),w=((k=y)==null?void 0:k.palette.mode)===H.LIGHT?(v=y)==null?void 0:v.palette.primary.main:"",M=s=>{o(K({anchor:s}))},C=()=>{o(A({appId:t,mapState:i}))},l=()=>{o(q()),o(I({appId:t,property:{isUpdated:!1}}))},u=()=>{P?j(!0):(C(),l())},_=()=>{te(t,s=>{if(n.debug(s),s!=null&&s.code&&(s==null?void 0:s.message)!==void 0)switch(s.code){case"ok":o(A({appId:t,mapState:d.getSelectors().selectMap(c.getState().maps,t)})),a(d.getSelectors().selectMap(c.getState().maps,t)),m(s.message,{variant:"success"});break;case"info":m(s.message,{variant:"info"});break;default:n.error(s),m(s.message??B.contactSupport,{variant:"error"})}},s=>{n.error("error",s),m(s??B.contactSupport,{variant:"error"})}),b(!1)},N=()=>{_(),l()},[T,V]=r.useState(0),O=r.useMemo(()=>[{title:"Map",icon:e.jsx(J,{})},{title:"Theme",icon:e.jsx(re,{})}],[]);return ce(t)!==!0?null:e.jsxs(e.Fragment,{children:[e.jsx(r.Suspense,{fallback:e.jsx(g,{}),children:e.jsxs(me,{closeDrawer:u,children:[e.jsxs(Q,{position:"static",elevation:4,sx:{borderRadius:0},children:[e.jsxs(Z,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsx(ne,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{flexGrow:1,paddingLeft:"6px"},children:"Map Builder"}),e.jsx(f,{title:"Dock to left",position:"bottom",children:e.jsx(h,{onClick:()=>{M(D.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(W,{})})}),e.jsx(f,{title:"Dock to right",position:"bottom",children:e.jsx(h,{onClick:()=>{M(D.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(X,{})})}),e.jsx(f,{title:"Close",position:"bottom",children:e.jsx(h,{onClick:u,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx($,{})})})]}),e.jsx(Y,{menuItems:O,menuIndex:T,setMenu:V})]}),e.jsx(E,{className:"pp-settings-container",children:e.jsx(R,{sx:{padding:0,margin:0},children:e.jsx(ae,{value:T,children:e.jsxs(oe,{sx:{margin:0,padding:0,overflowX:"hidden",overflowY:"auto",height:"calc(100vh - 232px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(z,{value:0,children:e.jsx(r.Suspense,{fallback:e.jsx(g,{}),children:e.jsx(ue,{appId:t})})}),e.jsx(z,{value:1,children:e.jsx(r.Suspense,{fallback:e.jsx(g,{}),children:e.jsx(pe,{appId:t,source:ie.TABLE,setIsUpdated:b})})})]})})})}),e.jsx(E,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:w},children:e.jsxs(R,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[e.jsx(x,{variant:"outlined",className:"footer_action_button_apply",onClick:_,children:"Apply"}),e.jsx(x,{variant:"outlined",className:"footer_action_button",onClick:N,children:"OK"}),e.jsx(x,{variant:"outlined",className:"footer_action_button",onClick:u,children:"Cancel"})]})})]})}),e.jsx(ee,{title:"Close Map Builder?",message:"All uncommitted changes will be lost!",open:L,setOpen:j,onConfirm:()=>{C(),l()},onKeep:()=>{l()}})]})};export{We as default};
