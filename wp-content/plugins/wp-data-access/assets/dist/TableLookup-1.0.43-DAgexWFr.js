import{j as g}from"./cm-1.0.43-BIThoEwM.js";import{r as y}from"./redux-1.0.43-X9ShETON.js";import{l as N}from"./ActionsDml-1.0.43-CZ8W9C-X.js";import{a as S}from"./hooks-1.0.43-Bzf6s8gj.js";import{l as i,cy as v,S as h,a as x,cz as p,o as j}from"./lib-1.0.43-GM4CAPbj.js";import"./vendor-1.0.43-CN03Eozo.js";import"./RestApi-1.0.43-DDknciaN.js";import"./loglevel-1.0.43-BZ7XahX3.js";import"./lodash-1.0.43-BGoSrRk7.js";import"./moment-1.0.43-C5S46NFB.js";const U=({appId:a,lookupColumn:e,cell:r,metaData:m,highlight:V})=>{i.debug(a,e,r,m);const l=S(),[b,o]=y.useState(r.getValue());return y.useEffect(()=>{var f;if(i.debug(a,e,r),e.lookup!==void 0){const s=v.getSelectors().selectLookupValue(h.getState().lookups,a,e.columnName,r.getValue());if(i.debug(s),s!==void 0&&s.length>0)Array.isArray(s)?o(s.join(e.lookup.delimiter)):o(s);else if(((f=e.lookup)==null?void 0:f.loadOnStartup)!==!0){const u={};u[e.lookup.key]=r.getValue(),i.debug(u);const k=m.isRelationSelectionTable===!0?x.relationTablePrefix+e.columnName:e.columnName;N(a,"table",k,e.lookup.key,e.lookup.value,u,{},t=>{if(i.debug(t.data),e.lookup!==void 0&&Array.isArray(t.data)&&t.data.length>0){let c="";if(!e.lookup.value.includes(","))c=t.data[0].value,o(c.toString());else{const d=e.lookup.value.split(",");o(d.map(n=>t.data[0][n]).join(e.lookup.delimiter)),c=d.map(n=>t.data[0][n])}l(p({appId:a,columnName:e.columnName,lookupValue:{key:t.data[0].key,value:c}}))}},t=>{i.error(t)}),l(p({appId:a,columnName:e.columnName,lookupValue:{key:u[e.lookup.key],value:u[e.lookup.key]}}))}}else o("")},[a,r,l,e]),g.jsx(g.Fragment,{children:V(j(b),e,e.columnName+r.row.id)})};export{U as default};
